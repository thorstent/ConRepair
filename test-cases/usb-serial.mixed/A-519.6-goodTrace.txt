Assertion: 519: assert((fw_tty_lock != 2) | (port_work_stop == 0));

 | main                                    | fw_module_thread                          | usb_bus_thread                                              | serial_bus_thread                      | tty_thread                                                          | attribute_thread                                    | usb_cb_thread                                                    | port_work_thread                                         | 
 | ======================================= | ========================================= | =========================================================== | ====================================== | =================================================================== | =================================================== | ================================================================ | ======================================================== | 
 | 583: fw_tty_registered = 0;             |                                           |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 | 584: fw_tty_initialized = 0;            |                                           |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 | 585: fw_tty_lock = 0;                   |                                           |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 | 586: fw_driver_list_consistent = 1;     |                                           |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 | 587: fw_idr_consistent = 1;             |                                           |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 | 588: fw_table_lock = 0;                 |                                           |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 | 589: fw_serial_bus_lock = 0;            |                                           |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 | 593: drv_usb_registered = 0;            |                                           |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 | 594: drv_usb_initialized = 0;           |                                           |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 | 596: drv_registered_with_usb_fw = 0;    |                                           |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 | 597: drv_registered_with_serial_fw = 0; |                                           |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 | 599: drv_id_table = 0;                  |                                           |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 | 600: drv_module_ref_cnt = 0;            |                                           |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 | 601: drv_device_id_registered = 0;      |                                           |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 | 604: dev_usb_serial_initialized = -1;   |                                           |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 | 605: dev_autopm = 0;                    |                                           |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 | 606: dev_disconnected = 0;              |                                           |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 | 607: dev_disc_lock = 0;                 |                                           |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 | 611: port_dev_registered = 0;           |                                           |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 | 612: port_initialized = 0;              |                                           |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 | 613: port_tty_registered = 0;           |                                           |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 | 614: port_tty_installed = 0;            |                                           |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 | 615: port_idr_registered = 0;           |                                           |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 | 616: port_work = 0;                     |                                           |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 | 617: port_work_initialized = 0;         |                                           |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 | 618: port_work_stop = 0;                |                                           |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 | 619: port_consistent = 1;               |                                           |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 | 620: port_lock = 0;                     |                                           |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 | 621: port_write_in_progress = 0;        |                                           |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 | 623: write_urb_state = 0;               |                                           |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         | 479: usb_serial_init();                   |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |   54: fw_tty_initialized = 1;             |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |   55: fw_tty_registered = 1;              |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         | 481: belkin_init();                       |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |   311: drv_usb_initialized = 1;           |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |   312: drv_usb_registered = 1;            |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |   316: lock_table();                      |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |     70: assume(fw_table_lock == 0);       |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |     71: fw_table_lock = 1;                |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           | 496: assume(drv_usb_registered | drv_device_id_registered); |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |   317: assert(fw_driver_list_consistent); |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           | 497: usb_serial_probe();                                    |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |   318: fw_driver_list_consistent = 0;     |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |   319: drv_registered_with_usb_fw = 1;    |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |   113: lock_table();                                        |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |   320: fw_driver_list_consistent = 1;     |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |   322: drv_registered_with_serial_fw = 1; |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |   323: unlock_table();                    |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |     76: fw_table_lock = 0;                |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |     70: assume(fw_table_lock == 0);                         |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |     71: fw_table_lock = 1;                                  |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |   115: assert(fw_driver_list_consistent);                   |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |   116b: assume(!(drv_registered_with_usb_fw == 0));         |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |   326: drv_id_table = 1;                  |                                                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |   121: try_module_get();                                    |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |     291a: assume(drv_module_ref_cnt >= 0);                  |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |     292: drv_module_ref_cnt = drv_module_ref_cnt + 1;       |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |   123b: assume(!(drv_module_ref_cnt <= 0));                 |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |   128: assert(drv_usb_initialized);                         |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |   129: assert(drv_usb_registered);                          |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |                                                                     | 570: try_module_get();                              |                                                                  |                                                          | 
 |                                         |                                           |   131: unlock_table();                                      |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |     76: fw_table_lock = 0;                                  |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |   133: dev_usb_serial_initialized = 1;                      |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |   134: belkin_probe();                                      |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |   137: belkin_attach();                                     |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |                                                                     |   291a: assume(drv_module_ref_cnt >= 0);            |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |                                                                     |   292: drv_module_ref_cnt = drv_module_ref_cnt + 1; |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        | 544: assume(drv_registered_with_serial_fw);                         |                                                     |                                                                  |                                                          | 
 |                                         |                                           |   143: dev_disconnected = 1;                                |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |   147: lock_table();                                        |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |     70: assume(fw_table_lock == 0);                         |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |     71: fw_table_lock = 1;                                  |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |   148: assert(fw_idr_consistent);                           |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |   149: fw_idr_consistent = 0;                               |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        | 545: serial_install();                                              |                                                     |                                                                  |                                                          | 
 |                                         |                                           |   150: port_idr_registered = 1;                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |   151: fw_idr_consistent = 1;                               |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |   400: lock_table();                                                |                                                     |                                                                  |                                                          | 
 |                                         |                                           |   152: unlock_table();                                      |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |     76: fw_table_lock = 0;                                  |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |     70: assume(fw_table_lock == 0);                                 |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |     71: fw_table_lock = 1;                                          |                                                     |                                                                  |                                                          | 
 |                                         |                                           |   155: port_work_initialized = 1;                           |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |   401b: assume(!(port_idr_registered == 0));                        |                                                     |                                                                  |                                                          | 
 |                                         |                                           |   156: port_initialized = 1;                                |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |   157: port_dev_registered = 1;                             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |   158: dev_disconnected = 0;                                |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |   407: lock_disc();                                                 |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |     379: assume(dev_disc_lock == 0);                                |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |     380: dev_disc_lock = 1;                                         |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |   408a: assume(dev_disconnected == 0);                              |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |   413: assert(port_initialized);                                    |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |   414: assert(dev_usb_serial_initialized > 0);                      |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |   415: dev_usb_serial_initialized = dev_usb_serial_initialized + 1; |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |   417: unlock_table();                                              |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |     76: fw_table_lock = 0;                                          |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |   420: try_module_get();                                            |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |     291a: assume(drv_module_ref_cnt >= 0);                          |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |     292: drv_module_ref_cnt = drv_module_ref_cnt + 1;               |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |   421b: assume(!(drv_module_ref_cnt <= 0));                         |                                                     |                                                                  |                                                          | 
 |                                         |                                           | 501b: assume(!(port_dev_registered == 0));                  |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |   427: dev_autopm = dev_autopm + 1;                                 |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |   428: port_tty_installed = 1;                                      |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |   429: unlock_disc();                                               |                                                     |                                                                  |                                                          | 
 |                                         |                                           | 502: usb_serial_disconnect();                               |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |     385: dev_disc_lock = 0;                                         |                                                     |                                                                  |                                                          | 
 |                                         |                                           |   166: lock_disc();                                         |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        | 547: lock_tty();                                                    |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |   92: assume(fw_tty_lock == 0);                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |   93: fw_tty_lock = 1;                                              |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        | 548b: assume(!(port_tty_installed == 0));                           |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        | 549: port_write_in_progress = 1;                                    |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        | 551: assert(port_initialized);                                      |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        | 552: assert(dev_usb_serial_initialized);                            |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        | 553: assert(port_tty_installed);                                    |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        | 554: lock_port();                                                   |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |   103: assume(port_lock == 0);                                      |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |   104: port_lock = 1;                                               |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        | 555: assert(port_consistent);                                       |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        | 556: port_consistent = 0;                                           |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        | 557: port_consistent = 1;                                           |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        | 558: unlock_port();                                                 |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |   109: port_lock = 0;                                               |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             | 532: lock_serial_bus();                |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        | 560a: assume(write_urb_state == 0);                                 |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        | 561: write_urb_state = 1;                                           |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |                                                                     |                                                     | 507: assume((write_urb_state == 1) | (drv_usb_registered == 0)); |                                                          | 
 |                                         |                                           |                                                             |                                        |                                                                     |                                                     | 508a: assume(write_urb_state == 1);                              |                                                          | 
 |                                         |                                           |                                                             |                                        |                                                                     |                                                     | 509: assert(drv_usb_initialized);                                |                                                          | 
 |                                         |                                           |                                                             |                                        | 564: unlock_tty();                                                  |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |                                                                     |                                                     | 510: write_urb_state = 0;                                        |                                                          | 
 |                                         |                                           |                                                             |   81: assume(fw_serial_bus_lock == 0); |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |   82: fw_serial_bus_lock = 1;          |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |                                                                     |                                                     | 511: serial_write_callback();                                    |                                                          | 
 |                                         |                                           |                                                             |                                        |                                                                     |                                                     |   465: assert(port_initialized);                                 |                                                          | 
 |                                         |                                           |                                                             |                                        |                                                                     |                                                     |   466: lock_port();                                              |                                                          | 
 |                                         |                                           |                                                             |                                        |                                                                     | 572b: assume(!(drv_module_ref_cnt <= 0));           |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |                                                                     |                                                     |     103: assume(port_lock == 0);                                 |                                                          | 
 |                                         |                                           |                                                             |                                        |                                                                     |                                                     |     104: port_lock = 1;                                          |                                                          | 
 |                                         |                                           |                                                             |                                        |                                                                     |                                                     |   467: assert(port_consistent);                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |                                                                     |                                                     |   468: port_consistent = 0;                                      |                                                          | 
 |                                         |                                           |                                                             |                                        |   98: fw_tty_lock = 0;                                              |                                                     |                                                                  |                                                          | 
 |                                         |                                           |     379: assume(dev_disc_lock == 0);                        |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |     380: dev_disc_lock = 1;                                 |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |                                                                     | 575: assume(drv_registered_with_serial_fw);         |                                                                  |                                                          | 
 |                                         |                                           |   168: assert(dev_usb_serial_initialized >= 0);             |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |                                                                     | 576: drv_device_id_registered = 1;                  |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |                                                                     | 577: drv_module_ref_cnt = drv_module_ref_cnt - 1;   |                                                                  |                                                          | 
 |                                         |                                           |   169: dev_disconnected = 1;                                |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |   170: unlock_disc();                                       |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |                                                                     |                                                     |   469: port_consistent = 1;                                      |                                                          | 
 |                                         |                                           |                                                             |                                        |                                                                     |                                                     |   470: unlock_port();                                            |                                                          | 
 |                                         |                                           |     385: dev_disc_lock = 0;                                 |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |                                                                     |                                                     |     109: port_lock = 0;                                          |                                                          | 
 |                                         |                                           |   172: assert(port_initialized);                            |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |   174b: assume(!(port_tty_installed == 0));                 |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |                                                                     |                                                     |   471: assert(port_work_initialized);                            |                                                          | 
 |                                         |                                           |   179: assume(fw_tty_lock == 0);                            |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |   180: fw_tty_lock = 2;                                     |                                        |                                                                     |                                                     |                                                                  |                                                          | 
 |                                         |                                           |                                                             |                                        |                                                                     |                                                     |   472: port_work = 1;                                            |                                                          | 
 |                                         |                                           |                                                             |                                        |                                                                     |                                                     |                                                                  | 518: assume((port_work == 1) | (port_work_stop == 1));   | 
 |                                         |                                           |                                                             |                                        |                                                                     |                                                     |                                                                  | 519: assert((fw_tty_lock != 2) | (port_work_stop == 0)); | 
