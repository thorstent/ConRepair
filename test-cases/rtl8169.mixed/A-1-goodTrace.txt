Deadlock step

 | main                       | pci_thread                         | workqueue_thread                     | dev_thread           | deadlock_thread                                                                                                | 
 | ========================== | ================================== | ==================================== | ==================== | ============================================================================================================== | 
 | 656: registered = 0;       |                                    |                                      |                      |                                                                                                                | 
 | 657: netif_running = 0;    |                                    |                                      |                      |                                                                                                                | 
 | 659: irq_enabled = 0;      |                                    |                                      |                      |                                                                                                                | 
 | 661: napi_enabled = 0;     |                                    |                                      |                      |                                                                                                                | 
 | 662: napi_scheduled = 0;   |                                    |                                      |                      |                                                                                                                | 
 | 664: reset_task_ready = 0; |                                    |                                      |                      |                                                                                                                | 
 | 666: sysfs_registered = 0; |                                    |                                      |                      |                                                                                                                | 
 | 668: dev_lock = 0;         |                                    |                                      |                      |                                                                                                                | 
 | 669: sysfs_lock = 0;       |                                    |                                      |                      |                                                                                                                | 
 | 670: rtnl_lock = 0;        |                                    |                                      |                      |                                                                                                                | 
 | 672: want_sysfs = 0;       |                                    |                                      |                      |                                                                                                                | 
 | 673: want_dev = 0;         |                                    |                                      |                      |                                                                                                                | 
 | 675: irq_sem = 0;          |                                    |                                      |                      |                                                                                                                | 
 | 676: napi_sem = 0;         |                                    |                                      |                      |                                                                                                                | 
 | 677: dev_on = 0;           |                                    |                                      |                      |                                                                                                                | 
 | 679: IntrStatus = 0;       |                                    |                                      |                      |                                                                                                                | 
 | 680: IntrMask = 0;         |                                    |                                      |                      |                                                                                                                | 
 |                            | 237: probe1 = drv_probe();         |                                      |                      |                                                                                                                | 
 |                            |   474: create_sysfs_files();       |                                      |                      |                                                                                                                | 
 |                            |                                    | 340a: assume(reset_task_ready == 0); |                      |                                                                                                                | 
 |                            |                                    |                                      |                      | 652: assert(!((((dev_lock == want_sysfs) & (sysfs_lock == want_dev)) & (dev_lock != 0)) & (sysfs_lock != 0))); | 
 |                            |     629a: assume(sysfs_lock == 0); |                                      |                      |                                                                                                                | 
 |                            |     629b: sysfs_lock = 1;          |                                      |                      |                                                                                                                | 
 |                            |     630: device_create_bin_file(); |                                      |                      |                                                                                                                | 
 |                            |       452: sysfs_registered = 1;   |                                      |                      |                                                                                                                | 
 |                            |     631a: sysfs_lock = 0;          |                                      |                      |                                                                                                                | 
 |                            |                                    |                                      | 317: IntrStatus = 1; |                                                                                                                | 
 |                            |   476: rc1 = register_netdev();    |                                      |                      |                                                                                                                | 
 |                            |     391: ret2 = -1;                |                                      |                      |                                                                                                                | 
 |                            |   476: rc1 = ret2;                 |                                      |                      |                                                                                                                | 
 |                            |   477: hw_start = drv_hw_start;    |                                      |                      |                                                                                                                | 
 |                            |   479a: assume(rc1 < 0);           |                                      |                      |                                                                                                                | 
 |                            |   480: ret4 = rc1;                 |                                      |                      |                                                                                                                | 
 |                            | 237: probe1 = ret4;                |                                      |                      |                                                                                                                | 
 |                            | 238b: assume(!(probe1 == 0));      |                                      |                      |                                                                                                                | 
